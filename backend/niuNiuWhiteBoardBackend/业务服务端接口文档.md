# niuNiuWhiteBoard后端接口文档

## POST 注册

POST /signup

> Body 请求参数

```json
{
  "mobile": "14433334444",
  "passwd": "123456",
  "name": "userName"
}
```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|body|body|object| 否 |none|
|» mobile|body|string| 是 |none|
|» passwd|body|string| 是 |none|
|» name|body|string| 是 |none|

> 返回示例

> OK

```json
{
  "code": 200,
  "message": "register success",
  "user_info": {
    "id": 3,
    "uuid": "01GH10GE835DW2W4X1A9S8DVCS",
    "name": "userName",
    "mobile": "13344443333"
  }
}
```

> 401 Response

```json
{
  "message": "string",
  "code": 0
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|OK|Inline|
|401|[Unauthorized](https://tools.ietf.org/html/rfc7235#section-3.1)|Unauthorized|Inline|
|500|[Internal Server Error](https://tools.ietf.org/html/rfc7231#section-6.6.1)|服务器错误|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none||none|
|» message|string|true|none||none|
|» user_info|object|true|none||none|
|»» id|integer|true|none||none|
|»» uuid|string|true|none||none|
|»» name|string|true|none||none|
|»» mobile|string|true|none||none|

状态码 **401**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» message|string|true|none||none|
|» code|integer|true|none||none|

状态码 **500**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» message|string|true|none||none|
|» code|integer|true|none||none|

## POST 登录

POST /login

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
||      |        |      |      |
|» mobile|body|string| 是 |none|
|» passwd|body|string| 是 |none|

> 返回示例

> 成功

```json
{
  "code": 200,
  "message": "login success",
  "user_info": {
    "id": 3,
    "uuid": "01GH10GE835DW2W4X1A9S8DVCS",
    "name": "userName",
    "mobile": "13344443333"
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none||none|
|» message|string|true|none||none|
|» user_info|object|true|none||none|
|»» id|integer|true|none||none|
|»» uuid|string|true|none||none|
|»» name|string|true|none||none|
|»» mobile|string|true|none||none|

## GET 获取用户信息

GET /v1/userinfo/{uuid}

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|uuid|path|string| 是 |用户uuid|

> 返回示例

> 成功

```json
{
  "id": 3,
  "uuid": "01GH10GE835DW2W4X1A9S8DVCS",
  "name": "userName",
  "mobile": "133****43333"
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» id|integer|true|none||none|
|» uuid|string|true|none||none|
|» name|string|true|none||none|
|» mobile|string|true|none||none|

## POST 创建房间

POST /v1/rooms

> Body 请求参数

```json
{
  "name": "teatRoom",
  "type": "teaching_room"
}
```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|token|header|string| 是 |每次请求结束后，从响应报文头部的Refresh_token中获取|
|body|body|object| 否 |none|
|» name|body|string| 是 |none|
|» type|body|string| 是 |none|

> 返回示例

> 成功

```json
{
  "id": 9,
  "uuid": "01GH11C40GPFHMF6EF3CV94SJY",
  "name": "teatRoom",
  "host_id": 3,
  "created_time": "2022-11-04T18:00:53+08:00",
  "updated_time": "2022-11-04T18:00:53+08:00",
  "state ": "",
  "type": "teaching_room"
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» id|integer|true|none||none|
|» uuid|string|true|none||none|
|» name|string|true|none||none|
|» host_id|integer|true|none||none|
|» created_time|string|true|none||none|
|» updated_time|string|true|none||none|
|» state|string|true|none||none|
|» type|string|true|none||none|

## GET 获取房间信息

GET /v1/rooms/{uuid}

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|uuid|path|string| 是 |房间uuid|
|token|header|string| 是 |每次请求结束后，从响应报文头部的Refresh_token中获取|

> 返回示例

> 成功

```json
{
  "id": 9,
  "uuid": "01GH11C40GPFHMF6EF3CV94SJY",
  "name": "teatRoom",
  "host_id": 3,
  "created_time": "2022-11-04T18:00:53+08:00",
  "updated_time": "2022-11-04T18:00:53+08:00",
  "state ": "",
  "type": "teaching_room",
  "myself": {
    "id": 14,
    "name": "userName",
    "user_uuid": "01GH10GE835DW2W4X1A9S8DVCS",
    "room_uuid": "01GH11C40GPFHMF6EF3CV94SJY",
    "permission": "user",
    "created_time": "2022-11-04T18:03:13+08:00",
    "updated_time": "2022-11-04T18:03:13+08:00"
  },
  "participants": [
    {
      "id": 13,
      "name": "userName",
      "user_uuid": "01GH10GE835DW2W4X1A9S8DVCS",
      "room_uuid": "01GH11C40GPFHMF6EF3CV94SJY",
      "permission": "host",
      "created_time": "2022-11-04T18:00:53+08:00",
      "updated_time": "2022-11-04T18:00:53+08:00"
    },
    {
      "id": 14,
      "name": "userName",
      "user_uuid": "01GH10GE835DW2W4X1A9S8DVCS",
      "room_uuid": "01GH11C40GPFHMF6EF3CV94SJY",
      "permission": "user",
      "created_time": "2022-11-04T18:03:13+08:00",
      "updated_time": "2022-11-04T18:03:13+08:00"
    }
  ]
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» id|integer|true|none||none|
|» uuid|string|true|none||none|
|» name|string|true|none||none|
|» host_id|integer|true|none||none|
|» created_time|string|true|none||none|
|» updated_time|string|true|none||none|
|» state|string|true|none||none|
|» type|string|true|none||none|
|» myself|object|true|none||none|
|»» id|integer|true|none||none|
|»» name|string|true|none||none|
|»» user_uuid|string|true|none||none|
|»» room_uuid|string|true|none||none|
|»» permission|string|true|none||none|
|»» created_time|string|true|none||none|
|»» updated_time|string|true|none||none|
|» participants|[object]|true|none||none|
|»» id|integer|true|none||none|
|»» name|string|true|none||none|
|»» user_uuid|string|true|none||none|
|»» room_uuid|string|true|none||none|
|»» permission|string|true|none||none|
|»» created_time|string|true|none||none|
|»» updated_time|string|true|none||none|

## GET 退出房间

GET /v1/rooms/{uuid}/exit

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|uuid|path|string| 是 |房间uuid|
|token|header|string| 是 |每次请求结束后，从响应报文头部的Refresh_token中获取|

> 返回示例

> 成功

```json
{
  "code": 200,
  "message": "退房成功"
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none||none|
|» message|string|true|none||none|

## GET 退出账户

GET /v1/logout

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|token|header|string| 是 |每次请求结束后，从响应报文头部的Refresh_token中获取|

> 返回示例

> 成功

```json
{
  "message": "logout success",
  "code": 200
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|成功|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» message|string|true|none||none|
|» code|integer|true|none||none|

## GET 获取房间列表

GET /v1/roomlist

### 请求参数

| 名称  | 位置   | 类型   | 必选 | 说明 |
| ----- | ------ | ------ | ---- | ---- |
| token | header | string | 是   | none |

> 返回示例

> 成功

```json
{
  "code": 200,
  "message": "get roomlist success",
  "roomlist": [
    {
      "id": 1,
      "uuid": "01GH0P1YG8048X96F008A3355H",
      "name": "testName",
      "host_id": 1,
      "created_time": "2022-11-04T14:43:05+08:00",
      "updated_time": "2022-11-04T14:43:05+08:00",
      "state ": "",
      "type": "teaching_room"
    },
    {
      "id": 2,
      "uuid": "01GH0P6HJ4RHXAPS7FEMHRG62H",
      "name": "testName",
      "host_id": 1,
      "created_time": "2022-11-04T14:45:35+08:00",
      "updated_time": "2022-11-04T14:45:35+08:00",
      "state ": "",
      "type": "teaching_room"
    }
  ]
}
```

### 返回结果

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | 成功 | Inline   |

### 返回数据结构

状态码 **200**

| 名称            | 类型     | 必选 | 约束 | 中文名 | 说明 |
| --------------- | -------- | ---- | ---- | ------ | ---- |
| » code          | integer  | true | none |        | none |
| » message       | string   | true | none |        | none |
| » roomlist      | [object] | true | none |        | none |
| »» id           | integer  | true | none |        | none |
| »» uuid         | string   | true | none |        | none |
| »» name         | string   | true | none |        | none |
| »» host_id      | integer  | true | none |        | none |
| »» created_time | string   | true | none |        | none |
| »» updated_time | string   | true | none |        | none |
| »» state        | string   | true | none |        | none |
| »» type         | string   | true | none |        | none |